<!DOCTYPE html>
<html lang="en" class="antialiased"> <!-- Added antialiased for smoother font rendering -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- 
      STEP 1: SEO & METADATA OPTIMIZATION
    -->

    <!-- Primary Meta Tags -->
    <title>Browser Christmas Lights Bookmarklet</title>
    <meta name="description" content="Install the Browser Christmas Lights bookmarklet to add a festive string of blinking holiday lights to any webpage.">
    <meta name="keywords" content="bookmarklet, christmas lights, browser toy, javascript, holiday, festive">
    <meta name="author" content="Chris Pirillo">
    <link rel="canonical" href="https://pirillo.com/arcade/browser-lights.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pirillo.com/arcade/browser-lights.html">
    <meta property="og:title" content="Browser Christmas Lights Bookmarklet">
    <meta property="og:description" content="Add festive, blinking Christmas lights to any webpage with this simple bookmarklet.">
    <meta property="og:image" content="https://pirillo.com/arcade/images/browser-lights.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="A browser window decorated with festive Christmas lights around the border.">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://pirillo.com/arcade/browser-lights.html">
    <meta name="twitter:site" content="@ChrisPirillo">
    <meta name="twitter:creator" content="@ChrisPirillo">
    <meta name="twitter:title" content="Browser Christmas Lights Bookmarklet">
    <meta name="twitter:description" content="Add festive, blinking Christmas lights to any webpage with this simple bookmarklet.">
    <meta name="twitter:image" content="https://pirillo.com/arcade/images/browser-lights.png">
    <meta name="twitter:image:alt" content="A browser window decorated with festive Christmas lights around the border.">

    <!-- 
      STEP 2 & 3: PERFORMANCE & CORE WEB VITALS (Fonts, Resource Hints)
    -->
    
    <!-- Preconnect to critical third-party origins -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
    
    <!-- 
      Preload and asynchronously load the Inter font.
      - `rel="preload"` fetches the font stylesheet early without blocking render.
      - `onload="..."` switches it to a live stylesheet once downloaded.
      - `display=swap` in the URL ensures text is visible in a fallback font (minimizing FOUT) and prevents CLS.
    -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <!-- Fallback for users with JavaScript disabled -->
    <noscript>
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap">
    </noscript>

    <!-- Tailwind CSS (Render-blocking as requested to prevent FOUC) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 
      STEP 4: TECHNICAL ENHANCEMENTS (Analytics, JSON-LD)
    -->

    <!-- Google Analytics Snippet (as requested) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1CQ4D3VQ3L"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-1CQ4D3VQ3L');
    </script>
    
    <!-- JSON-LD Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Browser Christmas Lights Bookmarklet",
      "url": "https://pirillo.com/arcade/browser-lights.html",
      "description": "Install the Browser Christmas Lights bookmarklet to add a festive string of blinking holiday lights to any webpage. A fun, free browser toy by Chris Pirillo.",
      "mainEntity": {
        "@type": "SoftwareApplication",
        "name": "Browser Christmas Lights Bookmarklet",
        "applicationCategory": "BrowserApplication",
        "operatingSystem": "Any",
        "author": {
          "@type": "Person",
          "name": "Chris Pirillo",
          "url": "https://pirillo.com/"
        },
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        }
      },
      "author": {
        "@type": "Person",
        "name": "Chris Pirillo",
        "url": "https://pirillo.com/"
      }
    }
    </script>
    
    <!-- Original inline style, modified to remove font-family (now handled by Google Fonts) -->
    <style>
        body {
            font-family: 'Inter', sans-serif; /* Kept as fallback, but Google Fonts will override */
            /* This line prevents text selection */
            user-select: none;
            -webkit-user-select: none; /* For Safari */
            -moz-user-select: none; /* For Firefox */
            -ms-user-select: none; /* For Internet Explorer/Edge */
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 flex flex-col items-center justify-center min-h-screen p-4">

    <!-- 
      SEMANTIC HTML REFACTOR:
      - Used <main> for the primary content block.
      - Used <section> for the instructional part.
      - Added a <footer>.
      - This improves accessibility and SEO without changing the visual layout.
    -->
    <main class="bg-white dark:bg-gray-800 shadow-2xl rounded-lg p-6 sm:p-10 max-w-md w-full text-center border border-gray-200 dark:border-gray-700 z-10">
        <!-- Added z-10 to make sure this is "above" the lights container, just in case -->
        <h1 class="text-2xl font-bold mb-4 text-green-600 dark:text-green-400">Christmas Lights Bookmarklet</h1>
        
        <section aria-label="Bookmarklet Installation Instructions" class="bg-gray-200 dark:bg-gray-700 rounded-lg p-6 mb-6">
            <p class="text-xl font-semibold mb-4">1. Drag this green button... </p>
            
            <!-- 
              BOOKMARKLET JAVASCRIPT:
              Per your explicit instructions, this href attribute is UNTOUCHED.
            -->
            <a href="javascript:(function(){if(document.getElementById('christmas-lights-container'))return;const colors=['#f00','#0f0','#00f','#ff0','#f0f','#f90'],bulbSpacing=50;function injectCSS(){const style=document.createElement('style');style.id='christmas-lights-styles';style.innerHTML=`#christmas-lights-container{pointer-events:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:99999}.light-string{position:fixed;background:#006400;z-index:99999}.light-bulb{width:12px;height:18px;background-color:currentColor;border-radius:50%;position:relative;animation:blink 1.5s infinite;box-shadow:0 0 5px 2px currentColor}.light-bulb::before{content:'';position:absolute;width:6px;height:4px;background:#333;left:3px}#lights-top{top:0;left:0;width:100%;height:5px;display:flex;justify-content:space-around;align-items:center}#lights-top .light-bulb{top:4px}#lights-top .light-bulb::before{top:-4px;border-radius:2px 2px 0 0}#lights-right{top:0;right:0;height:100%;width:5px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}#lights-right .light-bulb{width:18px;height:12px;right:3px}#lights-right .light-bulb::before{right:-4px;top:3px;height:6px;width:4px;left:auto;border-radius:0 2px 2px 0}#lights-bottom{bottom:0;left:0;width:100%;height:5px;display:flex;justify-content:space-around;align-items:center}#lights-bottom .light-bulb{bottom:4px}#lights-bottom .light-bulb::before{bottom:-4px;border-radius:0 0 2px 2px}#lights-left{top:0;left:0;height:100%;width:5px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}#lights-left .light-bulb{width:18px;height:12px;left:3px}#lights-left .light-bulb::before{left:-4px;top:3px;height:6px;width:4px;border-radius:2px 0 0 2px}@keyframes blink{0%,100%{opacity:1;box-shadow:0 0 5px 2px currentColor}50%{opacity:0.4;box-shadow:none}}.light-color-0{color:${colors[0]}}.light-color-1{color:${colors[1]}}.light-color-2{color:${colors[2]}}.light-color-3{color:${colors[3]}}.light-color-4{color:${colors[4]}}.light-color-5{color:${colors[5]}}`;document.head.appendChild(style)}function createLights(){const container=document.createElement('div');container.id='christmas-lights-container';const topString=document.createElement('div');topString.id='lights-top';topString.className='light-string';const rightString=document.createElement('div');rightString.id='lights-right';rightString.className='light-string';const bottomString=document.createElement('div');bottomString.id='lights-bottom';bottomString.className='light-string';const leftString=document.createElement('div');leftString.id='lights-left';leftString.className='light-string';const bulbsTop=Math.floor(window.innerWidth/bulbSpacing),bulbsSide=Math.floor(window.innerHeight/bulbSpacing);let lastColorIndex=-1;function createBulb(){let colorIndex;do{colorIndex=Math.floor(Math.random()*colors.length)}while(colorIndex===lastColorIndex);lastColorIndex=colorIndex;const bulb=document.createElement('span');bulb.className='light-bulb light-color-'+colorIndex;bulb.style.animationDelay=Math.random()*1.5+'s';return bulb}for(let i=0;i<bulbsTop;i++){topString.appendChild(createBulb())}lastColorIndex=-1;for(let i=0;i<bulbsTop;i++){bottomString.appendChild(createBulb())}lastColorIndex=-1;for(let i=0;i<bulbsSide;i++){rightString.appendChild(createBulb())}lastColorIndex=-1;for(let i=0;i<bulbsSide;i++){leftString.appendChild(createBulb())}container.appendChild(topString);container.appendChild(rightString);container.appendChild(bottomString);container.appendChild(leftString);document.body.appendChild(container)}injectCSS();createLights()})();"
               class="inline-block bg-green-600 text-white font-bold py-3 px-6 rounded-lg text-lg shadow-lg hover:bg-green-700 transition-all transform hover:scale-105 cursor-move">
                ðŸŽ„ Christmas Lights ðŸŽ„
            </a>
            <p class="text-xl font-semibold mt-4">2. ...up to your Bookmarks Bar.</p>
        </section>
        
        <p class="text-sm text-gray-500 dark:text-gray-400">That's it! Now, click your new bookmark when you want to hang temporary Christmas lights around the edge of any web page you visit. Hitting 'Refresh' clears them.</p>
    </main>

    <footer class="text-center text-xs text-gray-500 dark:text-gray-400 mt-4 pb-4">
        A fun browser toy by <a href="https://pirillo.com/" class="underline hover:text-green-500" rel="author">Chris Pirillo</a>.
    </footer>

    <!-- 
      ON-PAGE SCRIPT:
      Per your explicit instructions, this script block is UNTOUCHED.
      It is already set to run on DOMContentLoaded, which is non-blocking.
    -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            (function(){
                // Check if lights are already there
                if(document.getElementById('christmas-lights-container')) return;
                
                // --- Configuration ---
                const colors = ['#f00', '#0f0', '#00f', '#ff0', '#f0f', '#f90']; // Red, Green, Blue, Yellow, Magenta, Orange
                const bulbSpacing = 50; // Pixels between bulbs
                
                // --- Function to inject CSS ---
                function injectCSS(){
                    const style = document.createElement('style');
                    style.id = 'christmas-lights-styles';
                    // Using template literal for multiline CSS
                    style.innerHTML = `
                    #christmas-lights-container {
                        pointer-events: none; /* Allows clicking through the lights */
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        z-index: 99999;
                    }
                    .light-string {
                        position: fixed;
                        background: #006400; /* Dark green string */
                        z-index: 99999;
                    }
                    .light-bulb {
                        width: 12px;
                        height: 18px;
                        background-color: currentColor; /* Uses the color set by the class */
                        border-radius: 50%;
                        position: relative;
                        animation: blink 1.5s infinite;
                        box-shadow: 0 0 5px 2px currentColor;
                    }
                    .light-bulb::before {
                        content: '';
                        position: absolute;
                        width: 6px;
                        height: 4px;
                        background: #333; /* Bulb base */
                        left: 3px;
                    }
                    
                    /* Top String */
                    #lights-top {
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 5px; /* String thickness */
                        display: flex;
                        justify-content: space-around;
                        align-items: center;
                    }
                    #lights-top .light-bulb {
                        top: 4px; /* Hangs below the string */
                    }
                    #lights-top .light-bulb::before {
                        top: -4px; /* Base sits on top */
                        border-radius: 2px 2px 0 0;
                    }

                    /* Right String */
                    #lights-right {
                        top: 0;
                        right: 0;
                        height: 100%;
                        width: 5px; /* String thickness */
                        display: flex;
                        flex-direction: column;
                        justify-content: space-around;
                        align-items: center;
                    }
                    #lights-right .light-bulb {
                        width: 18px; /* Flipped dimensions for side */
                        height: 12px;
                        right: 3px; /* Hangs left of the string */
                    }
                    #lights-right .light-bulb::before {
                        right: -4px; /* Base sits on right */
                        top: 3px;
                        height: 6px;
                        width: 4px;
                        left: auto;
                        border-radius: 0 2px 2px 0;
                    }

                    /* Bottom String */
                    #lights-bottom {
                        bottom: 0;
                        left: 0;
                        width: 100%;
                        height: 5px; /* String thickness */
                        display: flex;
                        justify-content: space-around;
                        align-items: center;
                    }
                    #lights-bottom .light-bulb {
                        bottom: 4px; /* Sits above the string */
                    }
                    #lights-bottom .light-bulb::before {
                        bottom: -4px; /* Base sits below */
                        border-radius: 0 0 2px 2px;
                    }

                    /* Left String */
                    #lights-left {
                        top: 0;
                        left: 0;
                        height: 100%;
                        width: 5px; /* String thickness */
                        display: flex;
                        flex-direction: column;
                        justify-content: space-around;
                        align-items: center;
                    }
                    #lights-left .light-bulb {
                        width: 18px; /* Flipped dimensions for side */
                        height: 12px;
                        left: 3px; /* Hangs right of the string */
                    }
                    #lights-left .light-bulb::before {
                        left: -4px; /* Base sits on left */
                        top: 3px;
                        height: 6px;
                        width: 4px;
                        border-radius: 2px 0 0 2px;
                    }

                    @keyframes blink {
                        0%, 100% { opacity: 1; box-shadow: 0 0 5px 2px currentColor; }
                        50% { opacity: 0.4; box-shadow: none; }
                    }
                    
                    /* Dynamically created color classes */
                    .light-color-0 { color: ${colors[0]}; }
                    .light-color-1 { color: ${colors[1]}; }
                    .light-color-2 { color: ${colors[2]}; }
                    .light-color-3 { color: ${colors[3]}; }
                    .light-color-4 { color: ${colors[4]}; }
                    .light-color-5 { color: ${colors[5]}; }
                    `;
                    document.head.appendChild(style);
                }

                // --- Function to create bulbs ---
                function createLights(){
                    const container = document.createElement('div');
                    container.id = 'christmas-lights-container';
                    
                    const topString = document.createElement('div');
                    topString.id = 'lights-top';
                    topString.className = 'light-string';

                    const rightString = document.createElement('div');
                    rightString.id = 'lights-right';
                    rightString.className = 'light-string';

                    const bottomString = document.createElement('div');
                    bottomString.id = 'lights-bottom';
                    bottomString.className = 'light-string';

                    const leftString = document.createElement('div');
                    leftString.id = 'lights-left';
                    leftString.className = 'light-string';

                    // Calculate how many bulbs fit
                    const bulbsTop = Math.floor(window.innerWidth / bulbSpacing);
                    const bulbsSide = Math.floor(window.innerHeight / bulbSpacing);

                    let lastColorIndex = -1; // To prevent two same-colored bulbs in a row
                    
                    // Helper function to create a single bulb
                    function createBulb() {
                        let colorIndex;
                        do {
                            colorIndex = Math.floor(Math.random() * colors.length);
                        } while (colorIndex === lastColorIndex); // Keep trying until it's a new color
                        lastColorIndex = colorIndex;

                        const bulb = document.createElement('span');
                        bulb.className = 'light-bulb light-color-' + colorIndex;
                        // Random animation delay for twinkling effect
                        bulb.style.animationDelay = (Math.random() * 1.5) + 's';
                        return bulb;
                    }

                    // Populate top string
                    for(let i = 0; i < bulbsTop; i++) {
                        topString.appendChild(createBulb());
                    }
                    
                    // Populate bottom string
                    lastColorIndex = -1; // Reset for new string
                    for(let i = 0; i < bulbsTop; i++) {
                        bottomString.appendChild(createBulb());
                    }
                    
                    // Populate right string
                    lastColorIndex = -1; // Reset for new string
                    for(let i = 0; i < bulbsSide; i++) {
                        rightString.appendChild(createBulb());
                    }
                    
                    // Populate left string
                    lastColorIndex = -1; // Reset for new string
                    for(let i = 0; i < bulbsSide; i++) {
                        leftString.appendChild(createBulb());
                    }

                    // Add all strings to the container
                    container.appendChild(topString);
                    container.appendChild(rightString);
                    container.appendChild(bottomString);
                    container.appendChild(leftString);
                    
                    // Add the container to the page
                    document.body.appendChild(container);
                }

                // --- Run the functions ---
                injectCSS();
                createLights();
            })();
        });
    </script>
</body>
</html>